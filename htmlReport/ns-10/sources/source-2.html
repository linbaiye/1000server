


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > ExperienceUtil</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.y1000.exp</a>
</div>

<h1>Coverage Summary for Class: ExperienceUtil (org.y1000.exp)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">ExperienceUtil</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    71.4%
  </span>
  <span class="absValue">
    (5/7)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    72.7%
  </span>
  <span class="absValue">
    (32/44)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package org.y1000.exp;
&nbsp;
&nbsp;
&nbsp;public final class ExperienceUtil {
&nbsp;
&nbsp;    public static final int DEFAULT_EXP = 10000;
&nbsp;    private final int level;
&nbsp;    private final int exp;
&nbsp;    private final int gap;
&nbsp;    private final int maxExp;
&nbsp;
&nbsp;    public static final int MAX_EXP = 1085138172;
&nbsp;
<b class="fc">&nbsp;    public ExperienceUtil(int level, int exp, int gap, int maxExp) {</b>
<b class="fc">&nbsp;        this.level = level;</b>
<b class="fc">&nbsp;        this.exp = exp;</b>
<b class="fc">&nbsp;        this.gap = gap;</b>
<b class="fc">&nbsp;        this.maxExp = maxExp;</b>
&nbsp;    }
&nbsp;/*
&nbsp;type
&nbsp;   TLevelData = record
&nbsp;     rlevel : integer;
&nbsp;     rexp : integer;
&nbsp;     rgap : integer;
&nbsp;     rGetMaxExp : integer;
&nbsp;   end;
&nbsp;   PTLevelData = ^TLevelData;
&nbsp;     */
&nbsp;
<b class="fc">&nbsp;    private static final int[] EXPS = new int[] {</b>
&nbsp;            1, -1, 107, 21,
&nbsp;            2, 107, 140, 23,
&nbsp;            3, 247, 182, 26,
&nbsp;            4, 428, 235, 29,
&nbsp;            5, 664, 304, 33,
&nbsp;            6, 968, 391, 39,
&nbsp;            7, 1358, 501, 45,
&nbsp;            8, 1859, 638, 53,
&nbsp;            9, 2497, 811, 62,
&nbsp;            10, 3309, 1027, 68,
&nbsp;            11, 4336, 1295, 86,
&nbsp;            12, 5631, 1628, 101,
&nbsp;            13, 7259, 2040, 127,
&nbsp;            14, 9299, 2546, 149,
&nbsp;            15, 11845, 3169, 186,
&nbsp;            16, 15014, 3931, 218,
&nbsp;            17, 18944, 4860, 270,
&nbsp;            18, 23805, 5992, 315,
&nbsp;            19, 29796, 7365, 387,
&nbsp;            20, 37161, 9025, 451,
&nbsp;            21, 46187, 11029, 525,
&nbsp;            22, 57215, 13439, 584,
&nbsp;            23, 70654, 16329, 680,
&nbsp;            24, 86983, 19787, 761,
&nbsp;            25, 106771, 23912, 885,
&nbsp;            26, 130683, 28821, 993,
&nbsp;            27, 159504, 34645, 1154,
&nbsp;            28, 194148, 41537, 1298,
&nbsp;            29, 235686, 49674, 1505,
&nbsp;            30, 285359, 59253, 1692,
&nbsp;            31, 344612, 70503, 1905,
&nbsp;            32, 415115, 83680, 2145,
&nbsp;            33, 498796, 99078, 2416,
&nbsp;            34, 597873, 117024, 2721,
&nbsp;            35, 714897, 137888, 3064,
&nbsp;            36, 852785, 162086, 3448,
&nbsp;            37, 1014871, 190082, 3879,
&nbsp;            38, 1204953, 222393, 4360,
&nbsp;            39, 1427346, 259594, 4898,
&nbsp;            40, 1686940, 302322, 5496,
&nbsp;            41, 1989262, 351282, 6056,
&nbsp;            42, 2340544, 407249, 6568,
&nbsp;            43, 2747793, 471075, 7247,
&nbsp;            44, 3218867, 543691, 7879,
&nbsp;            45, 3762558, 626114, 8696,
&nbsp;            46, 4388672, 719450, 9466, 47, 5108122, 824899, 10441, 48, 5933021, 943753, 11370, 49, 6876774, 1077408, 12528, 50, 7954182, 1227359, 13637,
&nbsp;            51, 9181541, 1395203, 14686, 52, 10576744, 1582642, 15669, 53, 12159386, 1791483, 16900, 54, 13950868, 2023631, 18068, 55, 15974500, 2281096, 19496,
&nbsp;            56, 18255595, 2565979, 20861, 57, 20821574, 2880474, 22503, 58, 23702048, 3226859, 24081, 59, 26928907, 3607485, 25953, 60, 30536393, 4024770, 27757,
&nbsp;            61, 34561163, 4481182, 29098, 62, 39042345, 4979228, 30547, 63, 44021573, 5521438, 32101, 64, 49543011, 6110342, 33758, 65, 55653353, 6748455, 35518,
&nbsp;            66, 62401807, 7438251, 37378, 67, 69840059, 8182141, 39337, 68, 78022199, 8982441, 41393, 69, 87004640, 9841350, 43545, 70, 96845990, 10760913, 45791,
&nbsp;            71, 107606903, 11742996, 47160, 72, 119349899, 12789244, 48444, 73, 132139142, 13901053, 50003, 74, 146040195, 15079532, 51465, 75, 161119727, 16325465, 53177,
&nbsp;            76, 177445192, 17639277, 54780, 77, 195084469, 19020997, 56610, 78, 214105466, 20470218, 58319, 79, 234575684, 21986069, 60235, 80, 256561752, 23567175, 62018,
&nbsp;            81, 280128928, 25211630, 63505, 82, 305340558, 26916966, 65016, 83, 332257524, 28680123, 66543, 84, 360937647, 30497435, 68074, 85, 391435082, 32364602, 69601,
&nbsp;            86, 423799685, 34276681, 71113, 87, 458076366, 36228076, 72601, 88, 494304442, 38212533, 74055, 89, 532516975, 40223140, 75465, 90, 572740115, 42252340, 76822,
&nbsp;            91, 614992455, 44291942, 79805, 92, 659284397, 46333143, 82590, 93, 705617540, 48366557, 85453, 94, 753984097, 50382250, 88080, 95, 804366346, 52369783, 90762,
&nbsp;            96, 856736129, 54318261, 93170, 97, 911054390, 56216393, 95606,
&nbsp;            98, 967270783, 58052549, 97731,
&nbsp;            99, 1025323333, 59814839, 99691,
&nbsp;            100, MAX_EXP, 60000000, 0
&nbsp;    };
&nbsp;
<b class="fc">&nbsp;    private static final ExperienceUtil[] EXPERIENCES = buildArray();</b>
&nbsp;
&nbsp;    private static ExperienceUtil[] buildArray() {
<b class="fc">&nbsp;        ExperienceUtil[] experiences = new ExperienceUtil[100];</b>
<b class="fc">&nbsp;        for (int i = 0; i &lt; 100; i++) {</b>
<b class="fc">&nbsp;            int offset = i * 4;</b>
<b class="fc">&nbsp;            experiences[i] = new ExperienceUtil(EXPS[offset],  EXPS[offset + 1], EXPS[offset + 2], EXPS[offset + 3]);</b>
&nbsp;        }
<b class="fc">&nbsp;        return experiences;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /*
&nbsp;function GetLevel (aexp: integer): integer;
&nbsp;var
&nbsp;   i, rm, tempgap : integer;
&nbsp;   p, pold : PTLevelData;
&nbsp;begin
&nbsp;   if aexp &lt;= 0 then begin Result := 100; exit; end;
&nbsp;   if aexp &gt;= 1085138172 then begin Result := 9999; exit; end;
&nbsp;
&nbsp;   p := PTLevelData(@LevelsArr);
&nbsp;   pold := p;  inc (p);
&nbsp;
&nbsp;   Result := 100;
&nbsp;   for i := 2 to 100 do begin
&nbsp;      if (aexp &lt; p^.rexp) and (aexp &gt;= pold^.rexp) then begin
&nbsp;         rm := aexp - pold^.rexp;
&nbsp;         if pold^.rexp &lt; 10000000 then begin
&nbsp;            Result := (i-1)*100 + rm*100 div pold^.rgap;
&nbsp;         end else begin
&nbsp;            tempgap := pold^.rgap div 100;
&nbsp;            rm := rm div 100;
&nbsp;            Result := (i-1)*100 + rm*100 div tempgap;
&nbsp;         end;
&nbsp;         exit;
&nbsp;      end;
&nbsp;      pold := p;
&nbsp;      inc (p);
&nbsp;   end;
&nbsp;end;
&nbsp;     */
&nbsp;
&nbsp;    public static int computeLevel(int exp) {
<b class="fc">&nbsp;        if (exp &lt;=  0) {</b>
<b class="fc">&nbsp;            return 100;</b>
<b class="fc">&nbsp;        } else if (exp &gt;= 1085138172) {</b>
<b class="fc">&nbsp;            return 9999;</b>
&nbsp;        }
&nbsp;        int rm, tempgap;
<b class="fc">&nbsp;        int index = 1, previous = 0;</b>
<b class="fc">&nbsp;        int result = 100;</b>
<b class="fc">&nbsp;        for (int i = 2; i &lt;= 100; i++, index++, previous++) {</b>
<b class="fc">&nbsp;            if (exp &lt; EXPERIENCES[index].exp &amp;&amp; exp &gt;= EXPERIENCES[previous].exp) {</b>
<b class="fc">&nbsp;                rm = exp - EXPERIENCES[previous].exp;</b>
<b class="fc">&nbsp;                if (EXPERIENCES[previous].exp &lt; 10000000) {</b>
<b class="fc">&nbsp;                    result = (i - 1) * 100 + rm * 100 / EXPERIENCES[previous].gap;</b>
&nbsp;                } else {
<b class="fc">&nbsp;                    tempgap = EXPERIENCES[previous].gap / 100;</b>
<b class="fc">&nbsp;                    rm /= 100;</b>
<b class="fc">&nbsp;                    result = (i - 1) * 100  + rm * 100 / tempgap;</b>
&nbsp;                }
<b class="fc">&nbsp;                break;</b>
&nbsp;            }
&nbsp;        }
<b class="fc">&nbsp;        return result;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static int GetLevelMaxExp(int level) {
&nbsp;       /*
&nbsp;
&nbsp;function GetLevelMaxExp (alevel: integer): integer;
&nbsp;var
&nbsp;   n : integer;
&nbsp;   p : PTLevelData;
&nbsp;begin
&nbsp;   Result := 0;
&nbsp;   if alevel &lt; 100 then exit;
&nbsp;   if alevel &gt;= 9999 then exit;
&nbsp;   n := alevel div 100;
&nbsp;   p := PTLevelData(@LevelsArr);
&nbsp;   inc (p,n-1);
&nbsp;   Result := p^.rGetMaxExp;
&nbsp;end;
&nbsp;        */
<b class="fc">&nbsp;        int result = 0;</b>
<b class="fc">&nbsp;        if (level &lt; 100 | level &gt;= 9999) {</b>
<b class="nc">&nbsp;            return result;</b>
&nbsp;        }
<b class="fc">&nbsp;        return EXPERIENCES[(level / 100) - 1].maxExp;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    private static int addExp(int level, int currentExp, int addingExp) {
<b class="nc">&nbsp;        int n = GetLevelMaxExp(level) * 3;</b>
<b class="nc">&nbsp;        if (n &gt; addingExp) {</b>
<b class="nc">&nbsp;            n = addingExp;</b>
&nbsp;        }
&nbsp;        //currentlevel = ComputeLevel(currentExp + n);
<b class="nc">&nbsp;        return n;</b>
&nbsp;        /*
&nbsp;        var n : integer;
&nbsp;begin
&nbsp;   n := GetLevelMaxExp (aLevel) * 3;
&nbsp;   if n &gt; addvalue then n := addvalue;
&nbsp;   inc (aExp, n);
&nbsp;   aLevel := GetLevel (aExp);
&nbsp;   Result := n;
&nbsp;         */
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;    oldslevel := pCurAttackMagic.rcSkillLevel;
&nbsp;    Result := AddPermitExp (pCurAttackMagic.rcSkillLevel, pCurAttackMagic.rSkillExp, aexp);
&nbsp;   if oldslevel &lt;&gt; pCurAttackMagic.rcSkillLevel then begin
&nbsp;    FindAndSendMagic (pCurAttackMagic);
&nbsp;      FSendClass.SendEventString (StrPas (@pCurAttackMagic^.rname));
&nbsp;      MagicClass.Calculate_cLifeData (pCurAttackMagic);
&nbsp;    end;*/
&nbsp;
&nbsp;    //private static int currentlevel = 100;
&nbsp;
<b class="fc">&nbsp;    private static int currentExp = 0;</b>
&nbsp;
&nbsp;    public static void main(String[] args) {
&nbsp;        //int i = ComputeLevel(10000);
<b class="nc">&nbsp;        for (int i = 0; i &lt; 10000; i++) {</b>
<b class="nc">&nbsp;            var level = computeLevel(currentExp);</b>
<b class="nc">&nbsp;            int n = GetLevelMaxExp(level) * 3;</b>
<b class="nc">&nbsp;            if (n &gt; 10000) {</b>
<b class="nc">&nbsp;                n = 10000;</b>
&nbsp;            }
<b class="nc">&nbsp;            currentExp += n;</b>
<b class="nc">&nbsp;            System.out.println(&quot;Level &quot; + level + &quot;, exp &quot; + currentExp);</b>
&nbsp;        }
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-07-18 11:06</div>
</div>
</body>
</html>
