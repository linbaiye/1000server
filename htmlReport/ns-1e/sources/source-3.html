


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > PlayerRepositoryImpl</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.y1000.repository</a>
</div>

<h1>Coverage Summary for Class: PlayerRepositoryImpl (org.y1000.repository)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">PlayerRepositoryImpl</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/68)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package org.y1000.repository;
&nbsp;
&nbsp;import org.y1000.entities.players.*;
&nbsp;import org.y1000.kungfu.AssistantKungFu;
&nbsp;import org.y1000.kungfu.KungFuBookFactory;
&nbsp;import org.y1000.item.*;
&nbsp;import org.y1000.entities.players.inventory.Inventory;
&nbsp;import org.y1000.kungfu.KungFuBook;
&nbsp;import org.y1000.util.Coordinate;
&nbsp;
&nbsp;public final class PlayerRepositoryImpl implements PlayerRepository {
&nbsp;
<b class="nc">&nbsp;    private static final int[] slots = new int[]{-1, -1, 1,-1,-1,-1,-1,-1,-1,-1};</b>
&nbsp;
&nbsp;    private static final long playerIdStart = 1000000000;
&nbsp;
&nbsp;    private final ItemFactory itemFactory;
&nbsp;    private final KungFuBookFactory kungFuBookFactory;
&nbsp;    private final KungFuBookRepository kungFuRepository;
&nbsp;
&nbsp;    public PlayerRepositoryImpl(ItemFactory itemFactory,
&nbsp;                                KungFuBookFactory kungFuBookFactory,
<b class="nc">&nbsp;                                KungFuBookRepository kungFuRepository) {</b>
<b class="nc">&nbsp;        this.itemFactory = itemFactory;</b>
<b class="nc">&nbsp;        this.kungFuBookFactory = kungFuBookFactory;</b>
<b class="nc">&nbsp;        this.kungFuRepository = kungFuRepository;</b>
&nbsp;    }
&nbsp;
&nbsp;    private int findSlot() {
<b class="nc">&nbsp;        for (int i = 0; i &lt; slots.length; i++) {</b>
<b class="nc">&nbsp;            if (slots[i] == -1) {</b>
<b class="nc">&nbsp;                slots[i] = 0;</b>
<b class="nc">&nbsp;                return i;</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return 0;</b>
&nbsp;    }
&nbsp;
&nbsp;    private Inventory loadInventory() {
<b class="nc">&nbsp;        Inventory inventory = new Inventory();</b>
<b class="nc">&nbsp;        inventory.add(itemFactory.createItem(&quot;长剑&quot;));</b>
<b class="nc">&nbsp;        inventory.add(itemFactory.createItem(&quot;箭&quot;, 10000));</b>
<b class="nc">&nbsp;        inventory.add(itemFactory.createItem(&quot;太极斧&quot;));</b>
<b class="nc">&nbsp;        inventory.add(itemFactory.createItem(&quot;太极神枪&quot;));</b>
<b class="nc">&nbsp;        inventory.add(itemFactory.createItem(&quot;三叉戟&quot;));</b>
<b class="nc">&nbsp;        inventory.add(itemFactory.createItem(&quot;黄金手套&quot;));</b>
<b class="nc">&nbsp;        inventory.add(itemFactory.createItem(&quot;北海连环弓&quot;));</b>
<b class="nc">&nbsp;        inventory.add(itemFactory.createMoney( 10000));</b>
<b class="nc">&nbsp;        inventory.add(itemFactory.createItem(&quot;生药&quot;, 10000));</b>
<b class="nc">&nbsp;        inventory.add(itemFactory.createItem(&quot;杨家枪法&quot;, 1));</b>
<b class="nc">&nbsp;        inventory.add(itemFactory.createItem(&quot;无击阵&quot;, 1));</b>
<b class="nc">&nbsp;        inventory.add(itemFactory.createItem(&quot;雷剑式&quot;, 2));</b>
<b class="nc">&nbsp;        inventory.add(itemFactory.createItem(&quot;北马剑法&quot;, 1));</b>
<b class="nc">&nbsp;        inventory.add(itemFactory.createItem(&quot;壁射剑法&quot;, 1));</b>
<b class="nc">&nbsp;        inventory.add(itemFactory.createItem(&quot;金钟罩&quot;, 2));</b>
<b class="nc">&nbsp;        inventory.add(itemFactory.createItem(&quot;易筋经&quot;, 2));</b>
&nbsp;        /*inventory.add(itemFactory.createItem(&quot;女子血魔道袍&quot;));
&nbsp;        inventory.add(itemFactory.createItem(&quot;血化戟&quot;));
&nbsp;        inventory.add(itemFactory.createItem(&quot;血皇斧&quot;));*/
<b class="nc">&nbsp;        return inventory;</b>
&nbsp;    }
&nbsp;
&nbsp;    private Weapon weapon() {
<b class="nc">&nbsp;        return (Weapon) itemFactory.createItem(&quot;护国神剑&quot;);</b>
&nbsp;        //return (Weapon) itemFactory.createItem(&quot;太极斧&quot;);
&nbsp;    }
&nbsp;
&nbsp;    private KungFuBook loadKungFuBook() {
<b class="nc">&nbsp;        KungFuBook kungFuBook = kungFuBookFactory.create();</b>
<b class="nc">&nbsp;        kungFuBook.addToBasic(AssistantKungFu.builder().name(&quot;风灵旋&quot;).exp(0).eightDirection(false).build());</b>
<b class="nc">&nbsp;        kungFuBook.addToBasic(AssistantKungFu.builder().name(&quot;灵动八方&quot;).exp(0).eightDirection(true).build());</b>
<b class="nc">&nbsp;        return kungFuBook;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /*
&nbsp;       AttribData.cEnergy   := GetLevel (AttribData.Energy) + 500;     // 기본원기 = 5.00
&nbsp;   AttribData.cInPower  := GetLevel (AttribData.InPower) + 1000;   // 기본내공 = 10.00
&nbsp;   AttribData.cOutPower := GetLevel (AttribData.OutPower) + 1000;  // 기본외공 = 10.00
&nbsp;   AttribData.cMagic    := GetLevel (AttribData.Magic) + 500;      // 기본무공 = 5.00
&nbsp;   AttribData.cLife     := GetLevel (AttribData.Life) + 2000;      // 기본활력 = 20.00
&nbsp;     */
&nbsp;
&nbsp;    @Override
&nbsp;    public Player load(String token) {
<b class="nc">&nbsp;        int slot = findSlot();</b>
<b class="nc">&nbsp;        Weapon weapon = weapon();</b>
<b class="nc">&nbsp;        KungFuBook kungFuBook = loadKungFuBook();</b>
<b class="nc">&nbsp;        var yinyang = new YinYang();</b>
<b class="nc">&nbsp;        return PlayerImpl.builder()</b>
<b class="nc">&nbsp;                .id(slot + playerIdStart)</b>
<b class="nc">&nbsp;                .name(&quot;雨诗妾&quot;)</b>
<b class="nc">&nbsp;                .coordinate(new Coordinate(175+ slot, 40))</b>
<b class="nc">&nbsp;                .weapon(weapon)</b>
<b class="nc">&nbsp;                .kungFuBook(kungFuBook)</b>
<b class="nc">&nbsp;                .attackKungFu(kungFuBook.findUnnamedAttack(weapon.kungFuType()))</b>
<b class="nc">&nbsp;                .footKungfu(kungFuBook.getUnnamedFoot())</b>
<b class="nc">&nbsp;                .protectKungFu(kungFuBook.getUnnamedProtection())</b>
<b class="nc">&nbsp;                .inventory(loadInventory())</b>
<b class="nc">&nbsp;                .male(false)</b>
<b class="nc">&nbsp;                .trouser(itemFactory.createTrouser(&quot;女子短裙&quot;))</b>
<b class="nc">&nbsp;                .clothing(itemFactory.createClothing(&quot;女子上衣&quot;))</b>
<b class="nc">&nbsp;                .boot(itemFactory.createBoot(&quot;女子皮鞋&quot;))</b>
<b class="nc">&nbsp;                .hat(itemFactory.createHat(&quot;女子血魔头盔&quot;))</b>
<b class="nc">&nbsp;                .chest(itemFactory.createChest(&quot;女子雨中客道袍&quot;))</b>
<b class="nc">&nbsp;                .hair(itemFactory.createHair(&quot;女子麻花辫&quot;))</b>
<b class="nc">&nbsp;                .wrist(itemFactory.createWrist(&quot;女子太极护腕&quot;))</b>
<b class="nc">&nbsp;                .innateAttributesProvider(PlayerDefaultAttributes.INSTANCE)</b>
<b class="nc">&nbsp;                .yinYang(yinyang)</b>
<b class="nc">&nbsp;                .revival(0)</b>
<b class="nc">&nbsp;                .life(new PlayerLife(PlayerDefaultAttributes.INSTANCE.life(), yinyang.age()))</b>
<b class="nc">&nbsp;                .head(new PlayerLife(PlayerDefaultAttributes.INSTANCE.life(), yinyang.age()))</b>
<b class="nc">&nbsp;                .arm(new PlayerLife(PlayerDefaultAttributes.INSTANCE.life(), yinyang.age()))</b>
<b class="nc">&nbsp;                .leg(new PlayerLife(PlayerDefaultAttributes.INSTANCE.life(), yinyang.age()))</b>
<b class="nc">&nbsp;                .power(new PlayerExperiencedAgedAttribute(&quot;武功&quot;, PlayerDefaultAttributes.INSTANCE.power(), yinyang.age()))</b>
<b class="nc">&nbsp;                .innerPower(new PlayerExperiencedAgedAttribute(&quot;内功&quot;, PlayerDefaultAttributes.INSTANCE.innerPower(), yinyang.age()))</b>
<b class="nc">&nbsp;                .outerPower(new PlayerExperiencedAgedAttribute(&quot;外功&quot;, PlayerDefaultAttributes.INSTANCE.outerPower(), yinyang.age()))</b>
<b class="nc">&nbsp;                .pillSlots(new PillSlots())</b>
<b class="nc">&nbsp;                .build();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public void save(Player player) {
<b class="nc">&nbsp;        slots[(int)player.id()] = -1;</b>
&nbsp;    }
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-07-18 11:06</div>
</div>
</body>
</html>
